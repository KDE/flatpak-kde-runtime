{
    "build-runtime": true,
    "id": "org.kde.Sdk",
    "id-platform": "org.kde.Platform",
    "branch": "6.2",
    "runtime": "org.freedesktop.Platform",
    "sdk": "org.freedesktop.Sdk",
    "runtime-version": "21.08",
    "sdk-extensions": ["org.freedesktop.Sdk.Debug", "org.freedesktop.Sdk.Locale", "org.freedesktop.Sdk.Docs"],
    "platform-extensions": ["org.freedesktop.Platform.Locale"],
    "inherit-extensions": [
        "org.freedesktop.Platform.GL",
        "org.freedesktop.Platform.Timezones",
        "org.freedesktop.Platform.GStreamer",
        "org.freedesktop.Platform.Icontheme",
        "org.freedesktop.Platform.VAAPI.Intel",
        "org.freedesktop.Platform.openh264",
        "org.freedesktop.Platform.VulkanLayer",
        "org.gtk.Gtk3theme"
    ],
    "inherit-sdk-extensions": [
        "org.freedesktop.Sdk.Extension"
    ],
    "add-extensions": {
        "org.kde.Sdk.Docs" : {
            "directory": "share/runtime/docs",
            "bundle": true,
            "autodelete": true,
            "no-autodownload": true
        },
        "org.kde.KStyle" : {
            "directory": "share/runtime/lib/plugins/",
            "subdirectories": true,
            "no-autodownload": true,
            "version": "6.2",
            "merge-dirs": "styles",
            "add-ld-path": "lib",
            "download-if": "active-gtk-theme"
        },
        "org.kde.PlatformTheme" : {
            "directory": "share/runtime/lib/plugins/",
            "subdirectories": true,
            "no-autodownload": true,
            "version": "6.2",
            "merge-dirs": "platformthemes",
            "add-ld-path": "lib",
            "//TODO": "This is currently only used for gnome platform plugin and should be its own extension point",
            "download-if": "on-xdg-desktop-GNOME;on-xdg-desktop-GNOME-classic"
        },
        "org.kde.PlatformInputContexts" : {
            "directory": "share/runtime/lib/plugins/",
            "subdirectories": true,
            "autodelete": true,
            "no-autodownload": true,
            "version": "6.2",
            "merge-dirs": "platforminputcontexts",
            "add-ld-path": "lib"
        },
        "org.kde.WaylandDecoration" : {
            "directory": "share/runtime/lib/plugins/",
            "subdirectories": true,
            "no-autodownload": true,
            "version": "6.2",
            "merge-dirs": "wayland-decoration-client",
            "add-ld-path": "lib",
            "//TODO": "This is currently only used for gnome platform plugin and should be its own extension point",
            "download-if": "on-xdg-desktop-GNOME;on-xdg-desktop-GNOME-classic"
        }
    },
    "finish-args": [
        "--env=GI_TYPELIB_PATH=/app/lib/girepository-1.0",
        "--env=GST_PLUGIN_PATH=/app/lib/gstreamer-1.0:/usr/lib/extensions/gstreamer-1.0:/usr/lib/@@SDK_ARCH@@-linux-gnu/gstreamer-1.0",
        "--env=XDG_DATA_DIRS=/app/share:/usr/share:/usr/share/runtime/share:/run/host/share",
        "--env=QT_PLUGIN_PATH=/app/lib64/plugins:/app/lib/plugins:/usr/share/runtime/lib/plugins",
        "--env=QML2_IMPORT_PATH=/app/lib64/qml:/app/lib/qml",
        "--env=KDE_FORK_SLAVES=1",
        "--filesystem=xdg-config/kdeglobals:ro",
        "--talk-name=com.canonical.AppMenu.Registrar",
        "--sdk=org.kde.Sdk//6.2",
        "--runtime=org.kde.Platform//6.2"
    ],
    "cleanup": [ "/man",
                 "/share/man",
                 "/lib/systemd",
                 "*.la"],
    "cleanup-commands": [ "/usr/libexec/freedesktop-post.sh",
                          "mkdir -p /usr/lib/debug/usr/lib/i386-linux-gnu" ],
    "cleanup-platform": [ "/share/runtime/docs",
                          "/include",
                          "/share/aclocal",
                          "/share/pkgconfig",
                          "/lib/pkgconfig",
                          "/lib/*/pkgconfig",
                          "*.a",
                          "*.cmake",
                          "/lib/*/cmake",
                          "/mkspecs",
                          "/lib/mkspecs",
                          "*.prl"
                        ],
    "cleanup-platform-commands": [ "/usr/libexec/freedesktop-post.sh" ],
    "modules": [
        {
            "name": "qt6-qtbase",
            "cleanup-platform": [ "/bin" ],
            "build-options" : {
                "arch" : {
                    "x86_64" : {
                        "config-opts" : [
                            "-DINSTALL_LIBDIR=/usr/lib/x86_64-linux-gnu"
                        ]
                    },
                    "aarch64" : {
                        "config-opts" : [
                            "-DINSTALL_LIBDIR=/usr/lib/aarch64-linux-gnu"
                        ]
                    }
                }
            },
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DQT_DISABLE_RPATH=ON",
                "-DBUILD_WITH_PCH=FALSE",
                "-DQT_FEATURE_openssl_linked=ON", "-DQT_FEATURE_system_sqlite=ON"
            ],
            "sources": [
                { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtbase-everywhere-src-6.2.1.tar.xz", "sha256": "2c5f07b5c3ea27d3fc1a46686ea3fb6724f94dddf1fb007de3eb0bdb87429079" }
            ]
        },
        {
            "name": "qt6-qttools",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [
                "/bin/assistant", "/bin/qhelpgenerator", "/bin/qcollectiongenerator", "/bin/qhelpconverter", "/bin/pixeltool", "/bin/designer",
                "/bin/lrelease", "/bin/lupdate", "/bin/lconvert", "/bin/linguist", "/bin/qdoc", "/bin/qtattributionsscanner",
                "/bin/qtplugininfo", "/bin/qtdiag", "/bin/qdbusviewer"
            ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qttools-everywhere-src-6.2.1.tar.xz", "sha256": "5a856d3d3d5fe6e15dc3f1af707a0ef1df2e687850403fc94af635edb9312bfb" } ]
        },
        {
            "name": "qt6-shadertools",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin", "lib/plugins/qmltooling" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtshadertools-everywhere-src-6.2.1.tar.xz", "sha256": "2c8d38724181b31cd828a56e377775c2d461ee2ea0d6362ebec411c3b288067e" } ]
        },
        {
            "name": "qt6-webchannel",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtwebchannel-everywhere-src-6.2.1.tar.xz", "sha256": "035ba2e9a0e9de0baddd40f9d50014e6eb5f0b4ec741e9aec1b434e7c9e4e9c9" } ]
        },
        {
            "name": "qt6-qtlocation",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtlocation-everywhere-src-6.2.1.tar.xz", "sha256": "a99e92c762d45b17e14685cd8a3c1564a3da0ce1cfd1a68ffd5b3fd7c409dcad" } ]
        },
        {
            "name": "qt6-qtsvg",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtsvg-everywhere-src-6.2.1.tar.xz", "sha256": "86e27e005c2421052ca90e619c8d13f1bd19c6bf1a7b84dd4e0f7855fc884fd7" } ]
        },
        {
            "name": "qt6-qtmultimedia",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtmultimedia-everywhere-src-6.2.1.tar.xz", "sha256": "07764ad31d4d4ef679c3ceb861e762d12690b4fa899b3ccec45e5353309a90d0" } ]
        },
        {
            "name": "qt6-qtsensors",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtsensors-everywhere-src-6.2.1.tar.xz", "sha256": "5f55c972c52848f5c828148fded1b30de32955f7ee04867568c559991214739a" } ]
        },
        {
            "name": "qt6-qtimageformats",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtimageformats-everywhere-src-6.2.1.tar.xz", "sha256": "df61dc1a517988bfa123117c78a7dbeda859cbb6d9cbd080ce60058277bca3df" } ]
        },
        {
            "name": "qt6-connectivity",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtconnectivity-everywhere-src-6.2.1.tar.xz", "sha256": "8dcc366b0f5f124b20bf25e1b207a5ae4b75e45c62d2cc1f4dce138075c2714e" } ]
        },
        {
            "name": "qt6-qtdeclarative",
            "config-opts": ["-DQT_TOOL_COMMAND_WRAPPER_PATH=env"],
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin", "lib/plugins/qmltooling" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtdeclarative-everywhere-src-6.2.1.tar.xz", "sha256": "5aeb841a5665f79672a302569754ea7d541c69102c551707e43489e797213c71" } ]
        },
        {
            "name": "qt6-wayland",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtwayland-everywhere-src-6.2.1.tar.xz", "sha256": "051e6bd0a6fed988436fd86ad5146a556151f3a51f8bd5c4a31c99845a54efd7" } ]
        },
        {
            "name": "qt6-qtserialport",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtserialport-everywhere-src-6.2.1.tar.xz", "sha256": "ec77f4c9d6096588f3e735315f873976103479be453985b27f27fe8994e0776a" } ]
        },
        {
            "name": "qt6-qtwebsockets",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtwebsockets-everywhere-src-6.2.1.tar.xz", "sha256": "23344e21e96a839697abed7bf7931a8c08a752f08bf25edf240748501aba3816" } ]
        },
        {
            "name": "qt6-qtcharts",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtcharts-everywhere-src-6.2.1.tar.xz", "sha256": "f92ad16abd382a1488e6aafa129d88887a14300cb0f237fe37bca9173cf5a688" } ]
        },
        {
            "name": "qt6-qt3d",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qt3d-everywhere-src-6.2.1.tar.xz", "sha256": "730c0e8e1a1a59c4acbeca68e206bab14ef770f5dacb94b84103a82243cfeeb3" } ]
        },
        {
            "name": "qt6-qtnetworkauth",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtnetworkauth-everywhere-src-6.2.1.tar.xz", "sha256": "8027f85095a9c56d8cada988527454f786a5f8dd4157206db4f21299016d1c9e" } ]
        },
        {
            "name": "qt6-qttranslations",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qttranslations-everywhere-src-6.2.1.tar.xz", "sha256": "3f680b520da585697fc725697a52c7d2074a6a728f6830366b491a6f8b9183c7" } ]
        },
        {
            "name": "qt6-qtremoteobjects",
            "buildsystem": "cmake-ninja",
            "cleanup-platform": [ "/bin" ],
            "sources": [ { "type": "archive", "url": "https://download.qt.io/official_releases/qt/6.2/6.2.1/submodules/qtremoteobjects-everywhere-src-6.2.1.tar.xz", "sha256": "76681b03bb63e1cafa38a1bfde23c194f232aaff4b010d5f58c065fdcc0b379f" } ]
        },
        {
            "name": "os-release",
            "post-install": [
                "mkdir -p /usr/share/runtime/lib/plugins/"
            ],
            "sources": [
                {
                    "type": "file",
                    "path": "os-release"
                },
                {
                    "type": "file",
                    "path": "issue"
                },
                {
                    "type": "file",
                    "path": "issue.net"
                },
                {
                    "type": "file",
                    "path": "org.kde.Sdk.appdata.xml"
                },
                {
                    "type": "file",
                    "path": "org.kde.Platform.appdata.xml"
                },
                {
                    "type": "file",
                    "path": "os-release-Makefile",
                    "dest-filename": "Makefile"
                },
                {
                    "type": "script",
                    "commands": [],
                    "dest-filename": "configure"
                }
            ]
        }
    ]
}
